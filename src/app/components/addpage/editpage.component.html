<section class="my-4 container">

  <form [formGroup]="editInnerPageForm" (ngSubmit)="editInnerPage()">
    <div class="form-group">
      <label for="title">Title:</label>
      <input type="text" class="form-control" id="title" value="{{ page.innerPageList[page.innerPageList.length - 1].title }}">
    </div>
    <div class="form-group">
      <label for="description">Description:</label>
      <textarea id="description" class="form-control">{{ page.innerPageList[page.innerPageList.length - 1].description }}</textarea>
    </div>
    <div class="mb-3">
    <div *ngIf="page.innerPageList[page.innerPageList.length - 1].state === 'DRAFT'; else elseIfBlock">
      <button type="button" class="btn btn-primary mr-2" id="save">Save Draft</button>
      <button type="button" class="btn btn-primary" id="validation">Validation</button>
    </div>
    <ng-template #elseIfBlock>
      <div class="progress" *ngIf="page.innerPageList[page.innerPageList.length - 1].state === 'VALIDATING'; else elseBlock">
        <div class="progress-bar bg-success" role="progressbar" style="{{ 'width:' + (page.innerPageList[page.innerPageList.length - 1].favour * 20).toString() + '%' }}" aria-valuenow="{{ page.innerPageList[page.innerPageList.length - 1].favour * 20 }}" aria-valuemin="0" aria-valuemax="100">{{ page.innerPageList[page.innerPageList.length - 1].favour }}/5</div>
        <div class="progress-bar bg-danger" role="progressbar" style="{{ 'width:' + (page.innerPageList[page.innerPageList.length - 1].against * 20).toString() + '%' }}" aria-valuenow="{{ page.innerPageList[page.innerPageList.length - 1].against * 20 }}" aria-valuemin="0" aria-valuemax="100">{{ page.innerPageList[page.innerPageList.length - 1].against }}/5</div>
      </div>
    </ng-template>
    <ng-template #elseBlock>
      <button type="button" class="btn btn-primary" id="new">New title/description</button>
    </ng-template>
    </div>
  </form>

  <form *ngFor="let paragraph of page.paragraphList ">
    <h4 class="mb-4">Title: {{ paragraph.paragraphType.name }}</h4>
    <div class="form-group">
      <label for="title">Title:</label>
      <input type="text" class="form-control" id="title" value="{{ paragraph.innerParagraphList[paragraph.innerParagraphList.length - 1].title }}">
    </div>
    <div class="form-group">
      <label for="content">Content:</label>
      <textarea id="content" class="form-control">{{ paragraph.innerParagraphList[paragraph.innerParagraphList.length - 1].content }}</textarea>
    </div>
    <div class="mb-3">
      <div *ngIf="paragraph.innerParagraphList[paragraph.innerParagraphList.length - 1].state === 'DRAFT'; else elseIfBlock">
        <button type="button" class="btn btn-primary mr-2">Save Draft</button>
        <button type="button" class="btn btn-primary">Validation</button>
      </div>
      <ng-template #elseIfBlock>
        <div class="progress" *ngIf="paragraph.innerParagraphList[paragraph.innerParagraphList.length - 1].state === 'VALIDATING'; else elseBlock">
          <div class="progress-bar bg-success" role="progressbar" style="{{ 'width:' + (paragraph.innerParagraphList[paragraph.innerParagraphList.length - 1].favour * 20).toString() + '%' }}" aria-valuenow="{{ paragraph.innerParagraphList[paragraph.innerParagraphList.length - 1].favour * 20 }}" aria-valuemin="0" aria-valuemax="100">{{ paragraph.innerParagraphList[paragraph.innerParagraphList.length - 1].favour }}/5</div>
          <div class="progress-bar bg-danger" role="progressbar" style="{{ 'width:' + (paragraph.innerParagraphList[paragraph.innerParagraphList.length - 1].against * 20).toString() + '%' }}" aria-valuenow="{{ paragraph.innerParagraphList[paragraph.innerParagraphList.length - 1].against * 20 }}" aria-valuemin="0" aria-valuemax="100">{{ paragraph.innerParagraphList[paragraph.innerParagraphList.length - 1].against }}/5</div>
        </div>
      </ng-template>
      <ng-template #elseBlock>
        <button type="button" class="btn btn-primary">New title/description</button>
      </ng-template>
    </div>
  </form>

  <form *ngFor="let paratag of page.paratagList ">
    <h4 class="mb-4">Title: {{ paratag.paratagType.name }}</h4>
    <div class="form-group">
      <label for="title">Title:</label>
      <input type="text" class="form-control" id="title" value="{{ paratag.innerParatagList[paratag.innerParatagList.length - 1].title }}">
    </div>

    <div class="mb-3">
      <div *ngIf="paratag.innerParatagList[paratag.innerParatagList.length - 1].state === 'DRAFT'; else elseIfBlock">
        <button type="button" class="btn btn-primary mr-2">Save Draft</button>
        <button type="button" class="btn btn-primary">Validation</button>
      </div>
      <ng-template #elseIfBlock>
        <div class="progress" *ngIf="paratag.innerParatagList[paratag.innerParatagList.length - 1].state === 'VALIDATING'; else elseBlock">
          <div class="progress-bar bg-success" role="progressbar" style="{{ 'width:' + (paratag.innerParatagList[paratag.innerParatagList.length - 1].favour * 20).toString() + '%' }}" aria-valuenow="{{ paratag.innerParatagList[paratag.innerParatagList.length - 1].favour * 20 }}" aria-valuemin="0" aria-valuemax="100">{{ paratag.innerParatagList[paratag.innerParatagList.length - 1].favour }}/5</div>
          <div class="progress-bar bg-danger" role="progressbar" style="{{ 'width:' + (paratag.innerParatagList[paratag.innerParatagList.length - 1].against * 20).toString() + '%' }}" aria-valuenow="{{ paratag.innerParatagList[paratag.innerParatagList.length - 1].against * 20 }}" aria-valuemin="0" aria-valuemax="100">{{ paratag.innerParatagList[paratag.innerParatagList.length - 1].against }}/5</div>
        </div>
      </ng-template>
      <ng-template #elseBlock>
        <button type="button" class="btn btn-primary">New title/description</button>
      </ng-template>
    </div>
  </form>


</section>


